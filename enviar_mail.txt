<script type="text/javascript">
<!--//
$(document).ready(function() {
	$('#mini-contact').submit(function() {
		var user_name       = $('#nombre').val();
		var user_email      = $('#email').val();
		var user_phone      = $('#telefono').val();
		var user_message    = $('#mensaje').val();
		
		var	output = '<div class="error">Complete los campos obligatorios!</div>';

		var proceed = true;

		if(user_name == '') {
			$('#nombre').css('border-color','red');
			$("#result").hide().html(output).slideDown();
			proceed = false;
		}
		if(user_phone == '') {
			$('#telefono').css('border-color','red');
			$("#result").hide().html(output).slideDown();
			proceed = false;
		}
		if(user_email == '') {
			$('#email').css('border-color','red');
			$("#result").hide().html(output).slideDown();
			proceed = false;
		}
		if(user_message == '') {
			$('#mensaje').css('border-color','red');
			$("#result").hide().html(output).slideDown();
			proceed = false;
		}

		if(proceed) {
			$.ajax({
				type: 'POST',
				url: "<?php echo URL_WEB.'enviar_mail'; ?>",
				data: $(this).serialize(),
				success: function(response) {
					var isJson = true;				
					var clean = true;	

					try {
						data = $.parseJSON(response);	
					} catch(e) {
						isJson = false;
						output = '<div class="error">No se pudo enviar el correo. Por favor, int&eacute;ntelo m&aacute;s tarde!</div>';
					}				
					if(isJson) {
						if(data.type == 'error') {
							output = '<div class="error">'+data.text+'</div>';
							clean = false;
						} else {
							output = '<div class="success">'+data.text+'</div>';
						}
					}
					if(clean) {
						$('#mini-contact input.text').val('');
						$('#mini-contact input.inline').val('');
						$('#mini-contact textarea').val('');					
						$('#image-captcha').attr('src',"<?php echo URL_WEB.'recaptcha'; ?>");
					}
					$("#result").hide().html(output).slideDown();
				}
			});			
		}
		return false;
	});

	$('#mini-contact input, #mini-contact textarea').keyup(function() {
		$('#mini-contact input, #mini-contact textarea').css('border-color','');
		if($('#result').is(':visible')) $('#result').slideUp();
	});
});
//-->
</script>